<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Check Studio</title>
    <link rel="stylesheet" href="src/css/main.css">
    <link rel="stylesheet" href="src/css/projectsPage.css">
    <link rel="stylesheet" href="src/css/fonts.css">
    <script type="text/javascript" src="src/scripts/userInfo.js"></script>
    <script type="text/javascript" src="Javascripts\jquery\jquery-1.8.3.min.js"></script>
    <script type="text/javascript" src="Javascripts\xCheckStudio\CreateProject.js"></script>
    <script type="text/javascript" src="Javascripts\xCheckStudio\LoadProject.js"></script>
    <script type="text/javascript" src="Javascripts\xCheckStudio\SessionManager.js"></script>
    
  </head>
  <body>
    <header>
      <button type="button" class="dropDownMenu" >
      </button>
      <a class="homeLink" id="homeButton" href="#"><img class="headerLogo" src="public/symbols/XcheckLogoIcon.svg" alt=""></a>
      <div class="userInfo">
        <p class="userName"> User Name </p>
        <img id="userImg" src="public/notAUserImg.jpg" alt="">
        <div class="programCntrls">
          <button><img class="symbol" src="public/symbols/minimizeWin.svg" alt="minimize program"></button>
          <button><img class="symbol" src="public/symbols/maximizeWin.svg" alt="maximize program"></button>
          <button><img class="symbol" src="public/symbols/closeWin.svg" alt="maximize program"></button>
        </div>
      </div>

    </header>

<!-- My Projects -->
    <div class="content">
      <section id="myProjects" class="catagoryContainer">
        <div class="horizContainer">
          <img class="dropDownProjects" id="dropDownMyProj" src="public/symbols/chevronDN.svg" alt="">
          <h1>My Projects</h1>
          <div class="sortBy">
            <label for="sortMyProjects">Sort By:</label>
            <select name="sortMyProjects" onchange="controller.setSortBy(this.value);">
              <option value="name" selected>Name A-Z</option>
              <option value="nameReverse" selected>Name Z-A</option>
              <option value="status">Status A-Z</option>
              <option value="statusReverse">Status Z-A</option>
              <option value="date">Date Oldest-Newest</option>
              <option value="dateReverse">Date Newest-Oldest</option>
            </select>
          </div>
        </div>
        <div class="cardContainer" id="projects">
          <div class="card newProjectCard">
            <div class="projectName newCardCenter">
              <h2>New Project</h2>
            </div>
          </div>
        </div>

      </section>

<!-- Public Domain Projects -->
      <section id="publicProjects" class="catagoryContainer">
        <div class="horizContainer">
          <img class="dropDownProjects" id="dropDownPublicProj" src="public/symbols/chevronDN.svg" alt="">
          <h1>Public Projects</h1>
        </div>
        <div class="cardContainer" id="pubProjectsContainer">
        </div>
      </section>


    <!-- PROJECT OVERLAY -->
    <section id="checkSpaceOverlay" class="overlayBackground">
      <div id = "checkSpace" class="projectOverlay">
        <div class="checkSpaceHeader">
          <button id="checkReviewToggle" class="chkRevToggle" onclick="controller.setModule();" type="button" name="button"></button>
          <h1 id=checkSpaceProjectName></h1>
          <div class="checkSpaceButtons">
            <div class="sortBy">
              <label for="sortChecks">Sort By:</label>
              <select name="sortChecks" onchange="controller.setSortChecksBy(this.value);">
                <option value="name" selected>Name A-Z</option>
                <option value="nameReverse" selected>Name Z-A</option>
                <option value="status">Status A-Z</option>
                <option value="statusReverse">Status Z-A</option>
                <option value="date">Date Oldest-Newest</option>
                <option value="dateReverse">Date Newest-Oldest</option>
              </select>
            </div>
            <button id="refreshChecks" type="button" class="btnSymbol" name="refresh" onClick="checkView.renderChecks();">
              <img src="public/symbols/refresh.svg" alt="">
            </button>
            <button id="editProjectFromCheck" type="button" class="btnSymbol" name="projectInfo">
              <img src="public/symbols/infoMenu.svg" alt="">
            </button>
            <button type="button" name="closeCheckSpace" onclick="checkView.closeCheckSpace();">
              <img src="public/symbols/closeWin.svg" alt="">
            </button>
          </div>
        </div>
        <div class="checkSpaceBody">
          <div id="projectOverlayProjectDescription" class="projectInfoBoxes projectDescription">
            <p>Project Description:<p>
            <p class="smallScript" id="projectDescription"></p>
          </div>
          <div id="checkCardContainer" class="checkCardContainer"></div>
        </div>
      </div>
    </section>
  <!-- END CHECKSPACE OVERLAY -->
  <!-- BEGINNING NEW PROJECT OVERLAY -->
    <section id="newProject" class="projectOverlays">
      <div class="projectHeader">
        <h1>New Project</h1>
        <button type="button" name="closeNewProject" onclick="newProjectView.closeNewProject();">
          <img src="public/symbols/closeWin.svg" alt="">
        </button>
      </div>
      <form class="newProjectForm" action="index.html" method="post">
        <div class="projectInfo">
          <div class="projectCardAE">
            <div class="projectButtons">
              <input id="favoriteProject" id="inputprojectisfavorite" class="starCheckBox" type="checkbox" name="favoriteProject" value="true"></input>
              <label for="favoriteProject" class="starCheckBoxLabel"></label>
            </div>
            <div class="projectName">
              <input type="text" id="inputprojectname" name="projectName" value="" placeholder="Project Name Here">
              <select class="" id="inputprojectstatus" name="status">
                <option value="Active">Active</option>
                <option value="Finished">Finished</option>
                <option value="Archived">Archived</option>
              </select>
            </div>
          </div>
          <div class="projectParametersContainer">
            <label>Type:
              <select class="" name="type" id="inputprojecttype">
                <option value="Private">Private</option>
                <option value="Public">Public</option>
              </select>
            </label>
          </div>
          <div class="projectDescriptionContainer">
            <label for="projectDescription">Project Description:</label>
            <textarea class="newDescription" name="projectDescription" id="inputprojectdescription"></textarea>
          </div>
        </div>
        <div class="projectComments">
          <h2>Comments</h2>
          <textarea class="newComments" name="comments" id="inputprojectcomments"></textarea>
        </div>
        <!--<div class="checkSpaceCard submitNewProject" onclick="this.parentNode.submit();"></div>-->
        <div class="checkSpaceCard submitNewProject" onclick="OnCreateProject()">
          <div class="checkCardInfo">
            <div class="plusBtn">
            </div>
          </div>
          <div class="checkCardTitle checkCardTitleNew">
            <h2>New Check</h2>
          </div>
        </div>
      </form>
    </section>
    <!-- END NEW PROJECT OVERLAY -->
  <!-- BEGINNING NEW CHECK OVERLAY -->
    <section id="newCheck" class="projectOverlays">
      <div class="projectHeader">
        <h1>New CheckSpace</h1>
        <button type="button" name="closeNewCheck" onclick="newCheckView.closeNewCheck();">
          <img src="public/symbols/closeWin.svg" alt="">
        </button>
      </div>
      <form class="newProjectForm" action="index.html" method="post">
        <div class="projectInfo">
          <div class="projectCardAE">
            <div class="topOfProjectCard"></div>
            <div class="projectButtons">
              <input id="favoriteCheck" class="starCheckBox" type="checkbox" name="favoriteCheck" value="true"></input>
              <label for="favoriteCheck" class="starCheckBoxLabel"></label>
            </div>
            <div class="projectName">
              <input type="text" name="checkName" value="" placeholder="Check Name Here">
              <select class="" name="status">
                <option value="active">Active</option>
                <option value="finished">Finished</option>
                <option value="archived">Archived</option>
              </select>
            </div>
          </div>
          <div class="projectParametersContainer">
            <label>Configuration: <br>
              <select class="" name="config">
                <option value="config1">Config1</option>
                <option value="config2">Config2</option>
              </select>
            </label>
          </div>
          <div class="projectDescriptionContainer">
            <label for="checkDescription">Check Description:</label>
            <textarea class="newDescription" name="checkDescription"></textarea>
          </div>
        </div>
        <div class="projectComments">
          <h2>Comments</h2>
          <textarea class="newComments" name="checkComments"></textarea>
        </div>
        <div class="checkSpaceCard submitNewProject" onclick="this.parentNode.submit();">
          <div class="checkCardInfo checkCardInfoNew">
            <div class="plusBtn">
            </div>
          </div>
          <div class="checkCardTitle checkCardTitleNew">
            <h2>New Check</h2>
          </div>
        </div>
      </form>
    </section>
    <!-- END NEW CHECK OVERLAY -->
    <!-- BEGINNING EDIT PROJECT OVERLAY -->
    <section id="editProject" class="projectOverlays">
      <div class="projectHeader">
        <h1 id="currentProjectName"></h1>
        <button type="button" name="closeEditProject" onclick="editProjectView.closeEditProject();">
          <img src="public/symbols/closeWin.svg" alt="">
        </button>
      </div>
      <form id="editProjectForm" class="editProjectForm" action="index.html" method="post">
        <div class="projectInfo">
          <div class="projectCardAE">
            <div class="topOfProjectCard"></div>
            <div class="projectButtons">
              <input id="favoriteCheck" class="starCheckBox" type="checkbox" name="favoriteCheck" value="true"></input>
              <label for="favoriteCheck" class="starCheckBoxLabel"></label>
            </div>
            <div class="projectName">
              <input id="editProjectName" type="text" name="projectName" value="">
              <select class="" name="status">
                <option value="active">Active</option>
                <option value="finished">Finished</option>
                <option value="archived">Archived</option>
              </select>
            </div>
          </div>
          <div class="projectParametersContainer">
            <label>Type:
              <select class="" name="type">
                <option value="private">Private</option>
                <option value="public">Public</option>
              </select>
            </label>
          </div>
          <div class="projectParametersContainer">
            <p>Creator:<span id="editCreator"></span></p>
            <p>Date Created:<span id="editDateCreated"> </p>
          </div>
          <div class="projectDescriptionContainer">
            <label for="projectDescription">Project Description:</label>
            <textarea id="editProjectDescription" class="newDescription" name="projectDescription" value=""></textarea>
          </div>
        </div>
        <div class="projectComments">
          <h2>Comments</h2>
          <textarea id="editComments" class="newComments" name="comments" value></textarea>
        </div>
      </form>
    </section>
    <!-- END EDIT PROJECT OVERLAY -->
    <!-- BEGINNING EDIT CHECK OVERLAY -->
    <section id="editCheck" class="projectOverlays">
      <div class="projectHeader">
        <h1 id="currentCheckName"></h1>
        <button type="button" name="closeEditCheck" onclick="editCheckView.closeEditCheck();">
          <img src="public/symbols/closeWin.svg" alt="">
        </button>
      </div>
      <form id="editCheckForm" class="editProjectForm" action="index.html" method="post">
        <div class="projectInfo">
          <div class="projectCardAE">
            <div class="checkCardInfo"></div>
            <div class="projectName">
              <input id="editCheckName" type="text" name="checkName" value="">
              <select class="" name="status">
                <option value="active">Active</option>
                <option value="finished">Finished</option>
                <option value="archived">Archived</option>
              </select>
            </div>
          </div>
          <div class="projectParametersContainer">
            <label>Type:
              <select class="" name="type">
                <option value="private">Private</option>
                <option value="public">Public</option>
              </select>
            </label>
          </div>
          <div class="projectParametersContainer">
            <p>Creator:<span id="editCreator"></span></p>
            <p>Date Created:<span id="editDateCreated"> </p>
          </div>
          <div class="projectDescriptionContainer">
            <label for="checkDescription">Check Description:</label>
            <textarea id="editCheckDescription" class="newDescription" name="checkDescription" value=""></textarea>
          </div>
        </div>
        <div class="projectComments">
          <h2>Comments</h2>
          <textarea id="editCheckComments" class="newComments" name="comments" value></textarea>
        </div>
      </form>
    </section>
    <!-- END EDIT CHECK OVERLAY -->
    <!-- BEGINNING EDIT REVIEW OVERLAY -->
    <section id="editReview" class="projectOverlays">
      <div class="projectHeader">
        <h1 id="currentReviewName"></h1>
        <button type="button" name="closeEditCheck" onclick="editReviewView.closeEditReview();">
          <img src="public/symbols/closeWin.svg" alt="">
        </button>
      </div>
      <form id="editReviewForm" class="editProjectForm" action="index.html" method="post">
        <div class="projectInfo">
          <div class="projectCardAE">
            <div class="checkCardInfo reviewCardInfo"></div>
            <div class="projectName">
              <input id="editReviewName" type="text" name="checkName" value="">
              <select class="" name="status">
                <option value="active">Active</option>
                <option value="finished">Finished</option>
                <option value="archived">Archived</option>
              </select>
            </div>
          </div>
          <div class="projectParametersContainer">
            <label>Type:
              <select class="" name="type">
                <option value="private">Private</option>
                <option value="public">Public</option>
              </select>
            </label>
          </div>
          <div class="projectParametersContainer">
            <p>Creator:<span id="editCreator"></span></p>
            <p>Date Created:<span id="editDateCreated"> </p>
          </div>
          <div class="projectParametersContainer">
            <h3>Last Updated</h3>
            <p>By:<span id="lastEditedBy"></span></p>
            <p>Date:<span id="lastEditedDate"> </p>
          </div>
          <div class="projectDescriptionContainer">
            <label for="checkDescription">Review Description:</label>
            <textarea id="editReviewDescription" class="newDescription" name="ReviewDescription" value=""></textarea>
          </div>
        </div>
        <div class="projectComments">
          <h2>Comments</h2>
          <textarea id="editReviewComments" class="newComments newCommentsReview" name="comments" value></textarea>
        </div>
      </form>
    </section>
    <!-- END EDIT REVIEW OVERLAY -->
    <!-- BEGINNING DELETE ITEM WARNING -->
    <section id='delete' class="deleteWindow">
      <div class="deleteContainer">
        <div class="deleteTopBar">
          <div class="btnSymbol">
            <img src="public/symbols/TrashDelete.svg" alt="">
          </div>
          <h1>Delete <span id="deleteType"></span> instance?</h1>
        </div>
        <div class="msgArea">
          <p>Are you sure you want to delete this <span id="deleteMsg"></span></p>
        </div>
        <div class="buttonAreaDelete">
          <button id="deleteCancel" type="button" onclick="deleteItems.closeDeleteItems();">Cancel</button>
          <button id="deleteBtn" type="button">
            <img src="public/symbols/TrashDelete.svg" alt="">YES
          </button>
        </div>
      </div>
    </section>

    <script type="text/javascript" src="src/scripts/projectsPage.js"></script>
    <script>
      function OnCreateProject() {
          var projectname = document.getElementById("inputprojectname").value;
          if (projectname === undefined || projectname === "") {
             //Do something if user does not enter project name
          }
          var projectDescription = document.getElementById("inputprojectdescription").value;
          if (projectDescription === undefined || projectDescription === "") {
             //Do something if user does not enter project description
          }
          var projectComments = document.getElementById("inputprojectcomments").value;
          if (projectComments === undefined || projectComments === "") {
             //Do something if user does not enter project comments
          }
          
          var projectType = document.getElementById("inputprojecttype").value;
          if (projectType === undefined || projectType === "") {
             //Do something if user does not enter project type
          }

          var projectStatus = document.getElementById("inputprojectstatus").value;
          if (projectStatus === undefined || projectStatus === "") {
             //Do something if user does not enter project status
          }
          
          var projectIsFavorite=1;
          //Don't forget to implement Favorite option
          /*var projectIsFavorite = document.getElementById("inputprojectisfavorite").value;
          if (projectIsFavorite === undefined || projectIsFavorite === "") {
             //Do something if user does not enter project type
          }*/

          setProjectSessionData(projectname).then(function () {
              // create project database
              //createProject(projectname, descriptionText, functionText, projectScope);
              createNewProject(projectname, projectDescription, projectType, projectStatus, projectComments, projectIsFavorite)
          });

      }

      function setProjectSessionData(projectName) {
          return new Promise((resolve) => {
              $.ajax({
                  data: {
                      'InvokeFunction': 'CreateProjectSession',
                      'projectName': projectName,
                      'projectId': "",   // for now send the empty project ID, 
                                         // later in  AddProjectToMainDB() overwrite it                       
                      'loadProject' : 'FALSE',
                      'sourceAPath' : "Projects/"+projectName+"/SourceA",
                      'sourceBPath' : "Projects/"+projectName+"/SourceB"
                  },
                  type: "POST",
                  url: "PHP/ProjectManager.php"
              }).done(function (msg) {                    
                  return resolve(true);
              });
          });
      }

  </script>
  </body>
</html>
